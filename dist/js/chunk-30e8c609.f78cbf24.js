(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30e8c609"],{"1da6":function(t,e,n){"use strict";var c=n("7a23"),r=Object(c["R"])("data-v-b841083e");Object(c["w"])("data-v-b841083e");var a={key:0,class:"breadcrumbs"},u=Object(c["g"])("Вернуться к товарам"),i={class:"card-title"};Object(c["u"])();var o=r((function(t,e,n,o,b,s){var l=Object(c["B"])("router-link");return Object(c["t"])(),Object(c["e"])(c["a"],null,[n.back?(Object(c["t"])(),Object(c["e"])("div",a,[Object(c["h"])(l,{to:"/",class:"text-white"},{default:r((function(){return[u]})),_:1})])):Object(c["f"])("",!0),Object(c["h"])("div",{class:["card",{center:n.center}]},[Object(c["h"])("h1",i,[e[1]||(Object(c["D"])(-1),e[1]=Object(c["h"])("span",null,Object(c["F"])(n.title),1),Object(c["D"])(1),e[1]),Object(c["A"])(t.$slots,"header")]),Object(c["A"])(t.$slots,"default")],2)],64)})),b={props:{title:{type:String,required:!0},back:{type:Boolean,default:!1},center:{type:Boolean,default:!1}},setup:function(t){t.title&&(document.title="".concat(t.title," | Vue Лавка"))}};b.render=o,b.__scopeId="data-v-b841083e";e["a"]=b},"3f9b":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var c=new Intl.NumberFormat("ru-RU",{currency:"RUB",style:"currency"});function r(t){return c.format(t)}},"4c53":function(t,e,n){"use strict";var c=n("23e7"),r=n("857a"),a=n("af03");c({target:"String",proto:!0,forced:a("sub")},{sub:function(){return r(this,"sub","","")}})},"857a":function(t,e,n){var c=n("1d80"),r=/"/g;t.exports=function(t,e,n,a){var u=String(c(t)),i="<"+e;return""!==n&&(i+=" "+n+'="'+String(a).replace(r,"&quot;")+'"'),i+">"+u+"</"+e+">"}},af03:function(t,e,n){var c=n("d039");t.exports=function(t){return c((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b789:function(t,e,n){"use strict";n.r(e);n("4c53");var c=n("7a23"),r=Object(c["R"])("data-v-37b6a91c");Object(c["w"])("data-v-37b6a91c");var a={key:0,class:"text-center"},u={class:"table"},i=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",null,"Наименование"),Object(c["h"])("th",null,"Количество"),Object(c["h"])("th",null,"Цена (шт)")])],-1),o=Object(c["h"])("hr",null,null,-1),b={class:"text-right"},s={key:0,class:"text-right"};Object(c["u"])();var l=r((function(t,e,n,l,d,j){var p=Object(c["B"])("UserAuthForm"),O=Object(c["B"])("app-page");return Object(c["t"])(),Object(c["e"])(O,{title:"Корзина"},{default:r((function(){return[t.isEmpty?(Object(c["t"])(),Object(c["e"])("h3",a,"В корзине пока ничего нет")):(Object(c["t"])(),Object(c["e"])(c["a"],{key:1},[Object(c["h"])("table",u,[i,Object(c["h"])("tbody",null,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["z"])(t.cart,(function(e,n){return Object(c["t"])(),Object(c["e"])("tr",{key:n},[Object(c["h"])("td",null,Object(c["F"])(t.title(n)),1),Object(c["h"])("td",null,[Object(c["h"])("button",{class:"btn primary",onClick:Object(c["Q"])((function(t){return l.add(n)}),["stop"]),disabled:e>=t.count(n)},"+",8,["onClick","disabled"]),Object(c["g"])(" "+Object(c["F"])(e)+" шт. ",1),Object(c["h"])("button",{class:"btn danger",onClick:function(t){return l.sub(n)}},"-",8,["onClick"])]),Object(c["h"])("td",null,Object(c["F"])(t.price(n)),1)])})),128))])]),o,Object(c["h"])("p",b,[Object(c["h"])("strong",null,"Всего: "+Object(c["F"])(l.currency(t.total)),1)]),l.isAuth&&!t.isEmpty?(Object(c["t"])(),Object(c["e"])("p",s,[Object(c["h"])("button",{class:"btn",onClick:e[1]||(e[1]=function(){return l.onPay&&l.onPay.apply(l,arguments)})},"Оплатить")])):(Object(c["t"])(),Object(c["e"])(p,{key:1}))],64))]})),_:1})})),d=n("5530"),j=(n("96cf"),n("1da1")),p=n("5502"),O=Object(c["R"])("data-v-51c86878");Object(c["w"])("data-v-51c86878");var f=Object(c["h"])("h3",null,"Войдите в систему или создайте аккаунт для совершения покупки",-1),v={class:"form-control"},h=Object(c["h"])("label",{for:"email"},"Email",-1),m={class:"form-control"},y=Object(c["h"])("label",{for:"password"},"Пароль",-1),g=Object(c["h"])("button",{class:"btn primary",type:"submit"},"Войти",-1);Object(c["u"])();var w=O((function(t,e,n,r,a,u){return Object(c["t"])(),Object(c["e"])("form",{onSubmit:e[4]||(e[4]=Object(c["Q"])((function(){return r.login&&r.login.apply(r,arguments)}),["prevent"]))},[f,Object(c["h"])("div",v,[h,Object(c["P"])(Object(c["h"])("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.email=t})},null,512),[[c["K"],r.email]])]),Object(c["h"])("div",m,[y,Object(c["P"])(Object(c["h"])("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.password=t})},null,512),[[c["K"],r.password]])]),g,Object(c["h"])("button",{class:"btn",type:"button",onClick:e[3]||(e[3]=function(){return r.signUp&&r.signUp.apply(r,arguments)})},"Создать аккаунт")],32)})),k={setup:function(){var t=Object(p["b"])(),e=Object(c["y"])(""),n=Object(c["y"])(""),r=function(){var c=Object(j["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,t.dispatch("auth/login",{email:e.value,password:n.value});case 2:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),a=function(){var c=Object(j["a"])(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,t.dispatch("auth/signUp",{email:e.value,password:n.value});case 2:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return{email:e,password:n,login:r,signUp:a}}};k.render=w,k.__scopeId="data-v-51c86878";var x=k,R=n("1da6"),U=n("c444"),_=(n("7db0"),n("13d5"),n("b64b"),n("3f9b"));function F(){var t=Object(p["b"])(),e=Object(c["c"])((function(){return t.getters["product/products"]})),n=function(t){var n;return null===(n=e.value.find((function(e){return e.id===t})))||void 0===n?void 0:n.title},r=function(t){var n;return Object(_["a"])(null===(n=e.value.find((function(e){return e.id===t})))||void 0===n?void 0:n.price)},a=function(t){var n;return null===(n=e.value.find((function(e){return e.id===t})))||void 0===n?void 0:n.count},u=t.getters["cart/cart"],i=Object(c["c"])((function(){return Object.keys(u).reduce((function(t,n){var c;return t+(null===(c=e.value.find((function(t){return t.id===n})))||void 0===c?void 0:c.price)*u[n]}),0)})),o=Object(c["c"])((function(){return 0===Object.keys(u).length}));return{isEmpty:o,title:n,price:r,count:a,total:i,cart:u}}n("a4d3"),n("e01a"),n("d3b7");function A(t){var e=t.amount,n=t.description,c=t.accountId,r=t.data,a=void 0===r?{}:r,u=new cp.CloudPayments;return new Promise((function(t,r){u.pay("charge",{publicId:"test_api_00000000000000000000001",currency:"RUB",skin:"mini",description:n,amount:e,accountId:c,data:a},{onSuccess:function(e){t(e)},onFail:function(t,e){r(t)}})}))}var C=n("6c02"),I={setup:function(){var t=Object(c["y"])(!0),e=Object(p["b"])(),n=Object(C["e"])(),r=Object(U["a"])(),a=r.add,u=r.sub,i=F(),o=i.total;Object(c["r"])(Object(j["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.dispatch("product/load");case 2:t.value=!1;case 3:case"end":return n.stop()}}),n)}))));var b=Object(c["c"])((function(){return e.getters["auth/user"]})),s=Object(c["c"])((function(){return e.getters["auth/isAuthenticated"]})),l=function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A({description:"Покупка товаров в онлайн магазине",amount:o.value,accountId:b.value.email,data:{test:1}});case 3:return t.next=5,e.dispatch("order/create");case 5:n.push({name:"Thanks"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("Reject pay: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(d["a"])(Object(d["a"])({},F()),{},{add:a,sub:u,isAuth:s,loading:t,onPay:l,currency:_["a"]})},components:{AppPage:R["a"],UserAuthForm:x}};I.render=l,I.__scopeId="data-v-37b6a91c";e["default"]=I},c444:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n("7a23"),r=n("5502");function a(t){var e=Object(r["b"])(),n=Object(c["c"])((function(){var n;return null!==(n=e.getters["cart/cart"][t])&&void 0!==n?n:0})),a=function(t){return e.commit("cart/add",t)},u=function(t){return e.commit("cart/remove",t)};return{count:n,add:a,sub:u}}}}]);
//# sourceMappingURL=chunk-30e8c609.f78cbf24.js.map